# On Requirements for Synchronization of Laboratory Equipment

## Introduction
Synchronization devices play a crucial role in various laboratory experiments, particularly in fields that require precise timing and coordination among multiple components. These devices allow for laboratory equipment to work together in order to accomplish a common task. In the case for fluid dynamics, accurate and precise timing of equipment is particularly important since minor timing discrepancies can lead to non-insignificant errors in data collection and analysis. This has lead to commercial entities providing synchronizing devices with temporal resolutions often less than ten (10) nanoseconds along with advanced timing capabilities that are well suited for even the most complicated laboratory experiments. However, these devices come at the cost of exceedingly high cost-of-ownerships which limits them to institutions and organizations that are well funded. For example, one commercial synchronizer specialized for fluid flow measurements reportedly had a cost-of-ownership of $9,000 USD (I. Nepomnyi, personal communication, May 18, 2025). Although some commercial entities have since targeted this barrier to entry with lower cost synchronizer models, these models compromize certain features along with cost-of-ownerships that remain a burden to institutions and organizations that are not well-funded.

The high costs of commercial synchronizing devices has lead to a high degree of inginuity in the research community. For instance, the author of this brief paper replaced expensive commercial devices with simple Arduino microcontrollers. While such solutions certainly work, they provide a slew of problems associated with custom firmware implementations. For one, these custom devices often provide limited functionality and sometimes even require reconfiguration of the whole device to change timing parameters. Furthermore, most microcontrollers are not well suited for advanced synchronizing applications due to an intrinsic feature of these devices. This creates a gap in the current research equipment market for an easy to use and advanced low-cost synchronizing device.

Microcontrollers are basically serial devices. This means that parallel execution of code requires the use of multiple cores or peripheral devices. In contrast to microcontrollers, complex programmable logic devices (CPLDs) provide a means for effecient execution of parallel code at the expensive of steeper learning curves due to the utilization of hardware design languages. CPLDs are particularly well suited for synchronization devices and have found several uses in different laboratory settings. Nonetheless, CPLDs are time consuming to program and were not investigated in detail during this feasibility study.

## Design Concepts
The RP2040 and RP2350 microcontrollers designed and fabricated by the Raspberry Pi foundation are somewhat unique devices in that they provide a slew of features that make them very attractive for the purposes of controlling laboratory equipment. These microcontrollers provide an efficient means of general input/output (GPIO) manipulation through programmable input/output (PIO) blocks. PIO blocks allow for fast and efficient manipulation of GPIO pins through low-level means. An important feauter of PIO blocks is their ability to run independently from the system clock. This enables for features to be implemented on microcontroller architecture that would otherwise require CPLD or similar devices. The applicability of this microcontroller for the controlling of laboratory equipment was first realized by Starkey et al. (2024) where a pseudoclock and arbitrary pulse generator was implemented with great success. The results from Starkey et al. (2024) provided sufficient evidence to investigate the offerings from the Raspberry Pi foundation for the purpose of engineering an accurate and precise synchronizing device.

The synchronization of laboratory equipment can be broken down into two steps: a synchronization clock source and a pulse generator. A synchronization clock is simply a pulse that occurs at every known timestep to initiate a pulse sequence. Synchronization clocks can be implemented as a mere square wave with a repetition frequency measured in Hertz. The pulse generator is a somewhat more complex as it requires the ability to arbitrarily execute a pulse sequence. These two components allow for the design and implementation of an effective digital pulse generator which could be used to control laboratory equipment. While Starkey et al. (2024) implemented this basic two-component design, their approach requires the utilization of at least two microcontrollers. Instead, two PIO blocks of the RP2040 or RP2350 microcontroller could be utilized for the purposes of combining these two approaches into a singular device. This has the advantage of creating a more compact device that is simpler to construct and program.

## Design Requirements
The effective control of laboratory equipment in both simple and advanced laboratory experiments is no simple feat. The commercial devices often used in these settings mostly provide features and performances that are very good and hard to obtain without in-depth research and design. While the designed synchronizer would most likely not approach performances akin to its commercial counterparts, the synchronizer should still be able to perform most laboratory experiments in a reliable and repeatable manner. This requires the identification of engineering requirements for a device of such cailiber, as seen in Table 1.

Table 1. Engineering Requirements
| Engineering Requirements | Target Value | Justification(s) | 
| --- | --- | --- |
| Operating Fequency (MHz) | 200MHz | A 200MHz oeprating requency allows for a 5ns resolution in timing. |
| Internal Clocks | 4 | 4 internal clocks allows for ample room for advanced hardware synchronization. |
| Output Channels | 16 | 16 output channels provide ample room for hardware synchronization. |
| Input Channels | 2 | 2 input channels provide ample room for hardware synchronization. |
| I/O Channel Resistance (Ohms) | 50 Ohms | 50 Ohms seems to be the standard for device synchronization. |
| Clock Divider | 2 - 2^32-1 | Reduce system clock frequency to tune system to lower frequency conditions. |
| Pulse Width (us) | 1us to 1s | Most experiments do not require pulse lengths <1us or >1s. |
| Trigger Rate (KHz) | .001KHz to 100KHz | Most experiments do not require excessive trigger demands. |
| Internal Jitter (ns) | <10ns | A 10ns jitter corresponds to a 1% error or less for timing sequences of >1us resolution. |
| Trigger Jitter (ns) | <10ns | External trigger jitter should be as low as possible to reduce phase error. 10ns jitter corresponds to <1% error for microsecond scale timing resolution. |
| Communication Protocol | USB | USB on-the-go reduces setup complexity and allows for human-readable serialized commands for ease of use. |

## References

1. RP2350 Datasheet, A Microcontroller by Raspberry Pi. (2023). Raspberry Pi Ltd. https://datasheets.raspberrypi.com/rp2350/rp2350-datasheet.pdf
2. Starkey, P. T., Turnbaugh, C., Miller, P., LeBlanc, K.-J., & Meyer, D. H. (2024). Experimental timing and control using microcontrollers. Review of Scientific Instruments, 95(10). https://doi.org/10.1063/5.0225550